`timescale 1ns / 1ps

module testbench;
    reg Clock;
    reg rst;
    
    // Instantiate the CPU
    riscv_cpu uut (
        .clk(clk),
        .rst(rst)
    );
    
    // Clock generation
    always #5 clk = ~clk; // 10ns period, 100MHz clock
    
    initial begin
        $dumpfile("riscv_cpu_tb.vcd"); // For waveform analysis
        $dumpvars(0, riscv_cpu_tb);
        
        // Initialize signals
        clk = 0;
        rst = 1;
        #20 rst = 0; // Release reset after 20ns
        
        // Run simulation for some cycles
        #500;
        
        $display("Testbench finished.");
        $finish;
    end
    
    // Monitor CPU output (modify according to your design)
    always @(posedge clk) begin
        $display("PC: %h", uut.pc);
    end
    
endmodule
